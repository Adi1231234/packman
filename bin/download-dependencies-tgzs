#!/usr/bin/env node

const [, , name, version] = process.argv;

const crawler = require('../lib/crawler.js');
const { downloadFromSet } = require('../lib/downloader');
require('colors');

if(!name) {
    throw new Error('must provide a package name');
}

const start = Date.now();
crawler.getDependencies({ name, version, devDependencies: false, peerDependencies: true })
    .then(tarballsSet => downloadFromSet(tarballsSet))
    .then(() => {
        process.on('beforeExit', () => {
            console.log(`completed in ${Date.now() - start}ms`.green);
        });
    });